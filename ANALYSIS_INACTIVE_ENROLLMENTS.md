# –ê–Ω–∞–ª–∏–∑ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π (enrollments)

## üìä –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

### –û–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∞:

–í—Å–µ –∑–∞–ø–∏—Å–∏ –∏–º–µ—é—Ç:
- ‚úÖ `is_active = false` - –∑–∞–ø–∏—Å–∏ **–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã** (–æ—Ç–ø–∏—Å–∞–Ω—ã)
- ‚úÖ `unenrolled_at` - –µ—Å—Ç—å –¥–∞—Ç–∞ –æ—Ç–ø–∏—Å–∫–∏ (–≤—Å–µ –Ω–µ–¥–∞–≤–Ω–æ - —è–Ω–≤–∞—Ä—å 2026)
- ‚úÖ `student_status = active` - **—Å—Ç—É–¥–µ–Ω—Ç—ã –∞–∫—Ç–∏–≤–Ω—ã**
- ‚úÖ `activity_is_active = true` - **–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–Ω—ã**

### –ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:

–≠—Ç–æ **–Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –æ—Ç–ø–∏—Å–∫–∏** - —Å—Ç—É–¥–µ–Ω—Ç—ã –±—ã–ª–∏ –∑–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –ø–æ—Ç–æ–º –æ—Ç–ø–∏—Å–∞–Ω—ã, –Ω–æ:
- –°—Ç—É–¥–µ–Ω—Ç—ã –≤—Å–µ –µ—â–µ –∞–∫—Ç–∏–≤–Ω—ã –≤ —Å–∏—Å—Ç–µ–º–µ
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤—Å–µ –µ—â–µ –∞–∫—Ç–∏–≤–Ω—ã
- –ó–∞–ø–∏—Å–∏ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ (`is_active = false`)
- –ù–æ –æ–Ω–∏ **–æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ**, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–∏—Ö –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏

---

## ü§î –ü–æ—á–µ–º—É –æ–Ω–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è?

–í –∫–æ–¥–µ –µ—Å—Ç—å –ª–æ–≥–∏–∫–∞ (–≤ `AttendanceGrid.tsx`, —Å—Ç—Ä–æ–∫–∞ 59):

```typescript
enrollments.filter(enrollment => 
  enrollment.is_active || enrollmentsWithCharges.has(enrollment.id)
)
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è **–∞–∫—Ç–∏–≤–Ω—ã–µ** –∑–∞–ø–∏—Å–∏
- –ò **–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ** –∑–∞–ø–∏—Å–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ —Å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ–º

**–ü—Ä–∏—á–∏–Ω–∞:** –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö - –µ—Å–ª–∏ —É —Å—Ç—É–¥–µ–Ω—Ç–∞ –±—ã–ª–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å, –æ–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–∞–∂–µ –ø–æ—Å–ª–µ –æ—Ç–ø–∏—Å–∫–∏.

---

## üí° –ß—Ç–æ –¥–µ–ª–∞—Ç—å?

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (–µ—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏—è –Ω—É–∂–Ω–∞)

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –¥–ª—è –æ—Ç–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:
- **–ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã, –ø—Ä–æ—Å—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–∫—Ä—ã—Ç—å –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –≤–∏–¥–µ—Ç—å –æ—Ç–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ –∂—É—Ä–Ω–∞–ª–∞—Ö:

**–ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥** - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø–∏—Å–∏:

**–í `AttendanceGrid.tsx` (—Å—Ç—Ä–æ–∫–∞ 59):**
```typescript
// –ë—ã–ª–æ:
const visibleEnrollments = useMemo(() => (
  enrollments.filter(enrollment => 
    enrollment.is_active || enrollmentsWithCharges.has(enrollment.id)
  )
), [enrollments, enrollmentsWithCharges]);

// –°—Ç–∞–Ω–µ—Ç:
const visibleEnrollments = useMemo(() => (
  enrollments.filter(enrollment => enrollment.is_active)
), [enrollments]);
```

**–í `GardenAttendanceJournal.tsx` (—Å—Ç—Ä–æ–∫–∞ 119):**
```typescript
// –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å
const visibleEnrollments = useMemo(() => (
  enrollments.filter(enrollment => enrollment.is_active)
), [enrollments]);
```

**–í `EnhancedDashboard.tsx` (—Å—Ç—Ä–æ–∫–∏ 118-124):**
```typescript
// –ò–∑–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é shouldShowEnrollment
const shouldShowEnrollment = useMemo(
  () => (enrollment: { id: string; is_active: boolean }) =>
    enrollment.is_active, // –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ
  []
);
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –¥–ª—è –æ—Ç–ø–∏—Å–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏—è –Ω–µ –Ω—É–∂–Ω–∞, –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏:

```sql
-- –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –¥–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
DELETE FROM public.attendance
WHERE enrollment_id IN (
    SELECT id FROM public.enrollments WHERE is_active = false
);
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –ø–µ—Ä–µ—Å—Ç–∞–Ω—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è (—Ç–∞–∫ –∫–∞–∫ —É –Ω–∏—Ö –Ω–µ –±—É–¥–µ—Ç `enrollmentsWithCharges`).

---

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥—É—é –í–∞—Ä–∏–∞–Ω—Ç 2** - –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
- ‚úÖ –ù–µ —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ (–∏—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)
- ‚úÖ –°–∫—Ä—ã–≤–∞–µ—Ç –æ—Ç–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ –∂—É—Ä–Ω–∞–ª–∞—Ö
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–æ–¥–µ
- ‚úÖ –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –≤–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞—Ç–Ω–æ

---

## üéØ –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å?

1. **–†–µ—à–∏—Ç–µ, –Ω—É–∂–Ω–∞ –ª–∏ –∏—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏** –¥–ª—è –æ—Ç–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
2. **–ï—Å–ª–∏ –ù–ï –Ω—É–∂–Ω–∞** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 2 (–∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥)
3. **–ï—Å–ª–∏ –Ω—É–∂–Ω–∞** - –æ—Å—Ç–∞–≤—å—Ç–µ –∫–∞–∫ –µ—Å—Ç—å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 3 (—É–¥–∞–ª–∏—Ç—å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å)

–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã–±–∏—Ä–∞–µ—Ç–µ? –ú–æ–≥—É –ø–æ–º–æ—á—å –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥.
