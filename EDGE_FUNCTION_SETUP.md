# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Edge Function –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –ü—Ä–æ–±–ª–µ–º–∞

–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `signUp()`, —á—Ç–æ –ø–æ–¥–ø–∞–¥–∞–µ—Ç –ø–æ–¥ rate limits Supabase (2 email/—á–∞—Å –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø–ª–∞–Ω–µ).

## –†–µ—à–µ–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–µ–º Supabase Edge Function —Å Admin API, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ö–æ–¥–∏—Ç rate limits.

## –®–∞–≥–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Supabase Dashboard (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –°–º. —Ñ–∞–π–ª `EDGE_FUNCTION_DASHBOARD_GUIDE.md`

**–ö—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è:**

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç: `https://app.supabase.com/project/qtphickigswerhvintvh`

2. **–°–æ–∑–¥–∞–π—Ç–µ Edge Function:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Edge Functions** –≤ –ª–µ–≤–æ–º –º–µ–Ω—é
   - –ù–∞–∂–º–∏—Ç–µ **"Create a new function"**
   - –ò–º—è —Ñ—É–Ω–∫—Ü–∏–∏: `create-user`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `supabase/functions/create-user/index.ts` –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
   - –ù–∞–∂–º–∏—Ç–µ **"Deploy"**

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - –í —Ä–∞–∑–¥–µ–ª–µ **Edge Functions** ‚Üí **Settings** (–∏–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ñ—É–Ω–∫—Ü–∏–∏)
   - –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç:
     - **Name:** `SUPABASE_SERVICE_ROLE_KEY`
     - **Value:** –í–∞—à Service Role Key
     - Service Role Key –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ **Settings** ‚Üí **API** ‚Üí **service_role key** (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Supabase CLI

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Supabase CLI (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

```bash
npm install -g supabase
```

### 2. –í–æ–π–¥–∏—Ç–µ –≤ Supabase

```bash
supabase login
```

### 3. –°–≤—è–∂–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–≤—è–∑–∞–Ω)

```bash
supabase link --project-ref qtphickigswerhvintvh
```

### 4. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é

```bash
supabase functions deploy create-user
```

### 5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ß–µ—Ä–µ–∑ CLI:

```bash
supabase secrets set SUPABASE_SERVICE_ROLE_KEY=–≤–∞—à-service-role-key
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Dashboard:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Edge Functions** ‚Üí **Settings**
2. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - **Name:** `SUPABASE_SERVICE_ROLE_KEY`
   - **Value:** –í–∞—à Service Role Key (–º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ Settings ‚Üí API)

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–±–µ–∑ Edge Function)

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Edge Function, –º–æ–∂–Ω–æ:

1. **–£–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏** - –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ email –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
3. **–ü–æ–¥–æ–∂–¥–∞—Ç—å —á–∞—Å** –º–µ–∂–¥—É —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—á—Ç–æ–±—ã –Ω–µ –ø—Ä–µ–≤—ã—Å–∏—Ç—å –ª–∏–º–∏—Ç 2 email/—á–∞—Å)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å. –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥ (`signUp()`), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–ø–∞–¥–∞–µ—Ç –ø–æ–¥ rate limits.
